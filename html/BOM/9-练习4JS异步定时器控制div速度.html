<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>定时器控制div速度练习</title>
    <style type="text/css">
         #box1{
            width: 200px;
            height: 200px;
            background-color: red;
            position: absolute;
        }
    </style>
</head>
<body>
    <div>
        <h3>1.通过监听键盘按键事件改变元素的位置</h3>
        <p>
            本质是监听键盘的上下左右按键，然后通过style改变位置。
        </p>
    </div>
    <div id="box1"></div>
<!-- js -->
<script>
window.onload = function(){
    //定义一个变量表示方向
    //通过修改dir可以修改方向了
    //使dir等于用户按键的值
    var dir = 0;
    //onkeydown键盘按下事件，按着不松手事件一直在触发。
    //onkeyup按键松开事件，不会连续触发。
    //键盘事件一般绑定给一些可以获取到焦点的对象（表单项）或者是document。
    document.onkeydown = function(event){
        event = event ||window.event;
        //通过keyCode可以获取按键的编码，通过它可以判断是那个键被按下了。
        //altKey,shiftKey,ctrlKey,这个三个另外给的属性用来判断alt，shift，ctrl这三个键是否被按下。
        //37左
        //38上
        //39右
        //40下
        //使dir等于用户按键的值
            dir = event.keyCode;
    };
    //当按键松开时div不再移动
    document.onkeyup = function(){
        // console.log("按键被松开了");
        //设置dir为0
        dir = 0;
    };
    //开启一个定时器控制div的移动（但是不控制方向）
    setInterval(function(){
        //移动的步长可以是一个变量定义一个变量表示移动的步长。
        var speed = 20;
        switch(dir){
            case 37:
                // alert("向左移动了");
                //向左移动left值减小
                box1.style.left = box1.offsetLeft - speed +"px";
                break;
            case 38:
                // alert("向上移动了");
                box1.style.top = box1.offsetTop - speed +"px";
                break;
            case 39:
                // alert("向右移动了");
                box1.style.left = box1.offsetLeft + speed +"px";
                break;
            case 40:
                // alert("向下移动了");
                box1.style.top = box1.offsetTop + speed +"px";
                break;
        }
    },100);
};
</script>
</body>
</html>