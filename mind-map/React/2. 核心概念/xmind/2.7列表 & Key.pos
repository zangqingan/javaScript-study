{"diagram":{"image":{"x":0,"width":200,"y":0,"pngdata":"iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAsUlEQVR4nO3BAQEAAACCIP+vbkhAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB8GXHmAAFMgHIEAAAAAElFTkSuQmCC","height":200},"elements":{"leftChildren":[],"note":"","margin":{"childMarginW":10,"childMarginH":5,"marginW":20,"marginH":10},"watermark":"","children":[{"parent":"root","lineStyle":{"randomLineColor":"rgb(255,204,204)","lineColor":"#7B1FA2"},"children":[{"parent":"acb4883d19e1","note":"","children":[],"id":"92cecac22e33","title":"你可以通过使用&nbsp;{}&nbsp;在&nbsp;JSX&nbsp;内构建一个元素集合","icons":[{"color":"rgb(191, 30, 27)","name":"priority","index":"0","text":"&#xe67a"}]},{"parent":"acb4883d19e1","children":[{"parent":"7eb066bf6c6a","children":[],"style":{"background-color":"#F5F5F5"},"id":"6c6e1ee6352d","title":"const&nbsp;numbers&nbsp;=&nbsp;[1,&nbsp;2,&nbsp;3,&nbsp;4,&nbsp;5];<br>const&nbsp;listItems&nbsp;=&nbsp;numbers.map((number)&nbsp;=&gt;<br>&nbsp;&nbsp;&lt;li&gt;{number}&lt;/li&gt; );"}],"boundaries":[{"boundary":true,"parent":"7eb066bf6c6a","boundRank":1,"children":[],"pos":{"miny":9641,"minx":10701,"maxY":9717,"maxX":11012},"range":"0,0","style":{"lineType":"1","dasharray":"6,3","lineColor":"#63abf7","opacity":"0.1","fill":"#63abf7","lineWidth":"1"},"id":"0e70cc4d20ed","title":"外框"}],"id":"7eb066bf6c6a","title":"例如，我们使用&nbsp;Javascript&nbsp;中的&nbsp;map()&nbsp;方法来遍历&nbsp;numbers&nbsp;数组。<br>将数组中的每个元素变成&nbsp;&lt;li&gt;&nbsp;标签，最后我们将得到的数组赋值给&nbsp;listItems","icons":[{"color":"rgb(99, 171, 247)","name":"priority","index":"1","text":"&#xe625"}]},{"parent":"acb4883d19e1","children":[{"parent":"d71990a0d542","lineStyle":{"lineColor":"#555","lineWidth":1},"children":[],"style":{"background-color":"#F5F5F5","lineStype":{"lineType":"roundBroken","lineColor":"#555","lineWidth":1},"padding":"2px 8px 2px 8px","color":"#666","lineStyle":{"lineColor":"#555","lineWidth":1},"textAlign":"left","font-weight":"normal","font-size":"13px","font-family":"微软雅黑","bold":false,"font-style":"normal","italic":false},"id":"da4492576cbb","title":"ReactDOM.render(<br>&nbsp;&nbsp;&lt;ul&gt;{listItems}&lt;/ul&gt;,<br>&nbsp;&nbsp;document.getElementById('root')<br>);"}],"boundaries":[{"boundary":true,"parent":"d71990a0d542","boundRank":1,"children":[],"range":"0,0","style":{"lineType":"1","dasharray":"6,3","lineColor":"#63abf7","fill":"#63abf7","opacity":"0.1","lineWidth":"1"},"id":"7c1be5044706","title":"外框"}],"id":"d71990a0d542","title":"我们把整个&nbsp;listItems&nbsp;插入到&nbsp;&lt;ul&gt;&nbsp;元素中，<br>然后渲染进&nbsp;DOM","icons":[{"color":"rgb(113, 203, 45)","name":"priority","index":"2","text":"&#xe62a"}]}],"style":{"background-color":"#7B1FA2","border-radius":"5px","color":"rgb(255, 255, 255)","font-weight":"bold","font-size":13,"border-color":"rgb(255, 255, 255)","border-width":"0px","border-style":"none"},"id":"acb4883d19e1","title":"渲染多个组件"},{"parent":"root","lineStyle":{"lineColor":"#1976D2","lineWidth":"2"},"children":[{"parent":"0705770fd2ee","note":"function NumberList(props) {\n  const numbers = props.numbers;\n  const listItems = numbers.map((number) =&gt;\n    &lt;li key={number.toString()}&gt;\n      {number}\n    &lt;/li&gt;\n  );\n  return (\n    &lt;ul&gt;{listItems}&lt;/ul&gt;\n  );\n}\n\nconst numbers = [1, 2, 3, 4, 5];\nReactDOM.render(\n  &lt;NumberList numbers={numbers} /&gt;,\n  document.getElementById(&#39;root&#39;)\n);","children":[],"id":"7528d0288aed","title":"通常你需要在一个组件中渲染列表。<br>我们可以把前面的例子重构成一个组件，这个组件接收&nbsp;numbers&nbsp;数组作为参数并输出一个元素列表","icons":[]}],"style":{"padding":"8px 10px 8px 10px","backgroundColor":"#2196F3","color":"#F5F5F5","textAlign":"left","font-weight":"bold","font-size":13,"font-style":"normal","border-radius":"5px","background-color":"#1976D2","lineStype":{"lineColor":"#1976D2","lineWidth":"2"},"box-shadow":"1px 2px 6px #aaa","lineStyle":{"lineColor":"#1976D2","lineWidth":"2"},"font-family":"微软雅黑","border-width":0,"border-style":"solid"},"id":"0705770fd2ee","title":"基础列表组件"},{"parent":"root","lineStyle":{"lineColor":"#388E3C","randomLineColor":"rgb(153,204,255)","lineWidth":"2"},"children":[{"parent":"077289c0f72e","note":"","children":[{"parent":"e2848b441747","children":[],"style":{"background-color":"#F5F5F5"},"id":"6cd9246402f3","title":"const&nbsp;numbers&nbsp;=&nbsp;[1,&nbsp;2,&nbsp;3,&nbsp;4,&nbsp;5];<br>const&nbsp;listItems&nbsp;=&nbsp;numbers.map((number)&nbsp;=&gt;<br>&nbsp;&nbsp;&lt;li&nbsp;key={number.toString()}&gt;{number}&lt;/li&gt;);"}],"boundaries":[{"boundary":true,"parent":"e2848b441747","boundRank":1,"children":[],"range":"0,0","style":{"lineType":"1","dasharray":"6,3","lineColor":"#63abf7","fill":"#63abf7","opacity":"0.1","lineWidth":"1"},"id":"bd36ee569606","title":"外框"}],"id":"e2848b441747","title":"key&nbsp;帮助&nbsp;React&nbsp;识别哪些元素改变了，比如被添加或删除。<br>因此你应当给数组中的每一个元素赋予一个确定的标识","icons":[{"color":"rgb(191, 30, 27)","name":"priority","index":"0","text":"&#xe67a"}]},{"parent":"077289c0f72e","children":[{"parent":"90669add584b","lineStyle":{"lineColor":"#555","lineWidth":1},"children":[],"style":{"background-color":"#F5F5F5","lineStype":{"lineType":"roundBroken","lineColor":"#555","lineWidth":1},"padding":"2px 8px 2px 8px","color":"#666","lineStyle":{"lineColor":"#555","lineWidth":1},"textAlign":"left","font-weight":"normal","font-size":"13px","font-family":"微软雅黑","bold":false,"font-style":"normal","italic":false},"id":"d8436e0a84eb","title":"const&nbsp;todoItems&nbsp;=&nbsp;todos.map((todo)&nbsp;=&gt;<br>&nbsp;&nbsp;&lt;li&nbsp;key={todo.id}&gt;{todo.text}&lt;/li&gt;);"}],"boundaries":[{"boundary":true,"parent":"90669add584b","boundRank":1,"children":[],"range":"0,0","style":{"lineType":"1","dasharray":"6,3","lineColor":"#63abf7","fill":"#63abf7","opacity":"0.1","lineWidth":"1"},"id":"d21b56c7a127","title":"外框"}],"id":"90669add584b","title":"一个元素的&nbsp;key&nbsp;最好是这个元素在列表中拥有的一个独一无二的字符串。<br>通常，我们使用数据中的&nbsp;id&nbsp;来作为元素的&nbsp;key","icons":[{"color":"rgb(99, 171, 247)","name":"priority","index":"1","text":"&#xe625"}]},{"parent":"077289c0f72e","children":[{"parent":"c9d0f31afd59","lineStyle":{"lineColor":"#555","lineWidth":1},"children":[],"style":{"background-color":"#F5F5F5","lineStype":{"lineColor":"#555","lineWidth":1},"padding":"2px 8px 2px 8px","color":"#666","lineStyle":{"lineColor":"#555","lineWidth":1},"textAlign":"left","font-weight":"normal","font-size":"13px","font-family":"微软雅黑","bold":false,"font-style":"normal","italic":false},"id":"84eb7f56a255","title":"const&nbsp;todoItems&nbsp;=&nbsp;todos.map((todo,&nbsp;index)&nbsp;=&gt;<br>&nbsp;&nbsp;&lt;li&nbsp;key={index}&gt;{todo.text}&nbsp;&lt;/li&gt;);"}],"boundaries":[{"boundary":true,"parent":"c9d0f31afd59","boundRank":1,"children":[],"range":"0,0","style":{"lineType":"1","dasharray":"6,3","lineColor":"#63abf7","fill":"#63abf7","opacity":"0.1","lineWidth":"1"},"id":"ca7f70f2aafa","title":"外框"}],"id":"c9d0f31afd59","title":"当元素没有确定&nbsp;id&nbsp;的时候，<br>万不得已你可以使用元素索引&nbsp;index&nbsp;作为&nbsp;key<br>","icons":[{"color":"rgb(113, 203, 45)","name":"priority","index":"2","text":"&#xe62a"}]},{"parent":"077289c0f72e","children":[{"parent":"61071dbce80f","children":[],"id":"16c3b97a7dcf","title":"如果列表项目的顺序可能会变化，我们不建议使用索引来用作&nbsp;key&nbsp;值，因为这样做会导致性能变差，还可能引起组件状态的问题"},{"parent":"61071dbce80f","children":[],"id":"31acfaf8b48b","title":"如果你选择不指定显式的&nbsp;key&nbsp;值，那么&nbsp;React&nbsp;将默认使用索引用作为列表项目的&nbsp;key&nbsp;值"}],"id":"61071dbce80f","title":"注意："}],"style":{"padding":"8px 10px 8px 10px","backgroundColor":"#2196F3","color":"rgb(255, 255, 255)","textAlign":"left","font-weight":"bold","font-size":13,"border-color":"rgb(255, 255, 255)","font-style":"normal","border-radius":"5px","background-color":"#388E3C","lineStype":{"lineColor":"#388E3C","randomLineColor":"rgb(153,204,255)","lineWidth":"2"},"box-shadow":"1px 2px 6px #aaa","lineStyle":{"lineColor":"#388E3C","randomLineColor":"rgb(153,204,255)","lineWidth":"2"},"font-family":"微软雅黑","border-width":"0px","border-style":"none"},"id":"077289c0f72e","title":"key"},{"parent":"root","lineStyle":{"lineColor":"#F57F17","randomLineColor":"rgb(153,204,255)","lineWidth":"2"},"children":[{"parent":"4fddcf0c629c","note":"","children":[],"id":"2b86d552e6f2","title":"元素的&nbsp;key&nbsp;只有放在就近的数组上下文中才有意义","icons":[{"color":"rgb(191, 30, 27)","name":"priority","index":"0","text":"&#xe67a"}]},{"parent":"4fddcf0c629c","note":"例子：不正确的使用 key 的方式\n\nfunction ListItem(props) {\n  const value = props.value;\n  return (\n    // 错误！你不需要在这里指定 key：\n    &lt;li key={value.toString()}&gt;\n      {value}\n    &lt;/li&gt;\n  );\n}\n\nfunction NumberList(props) {\n  const numbers = props.numbers;\n  const listItems = numbers.map((number) =&gt;\n    // 错误！元素的 key 应该在这里指定：\n    &lt;ListItem value={number} /&gt;\n  );\n  return (\n    &lt;ul&gt;\n      {listItems}\n    &lt;/ul&gt;\n  );\n}\n\nconst numbers = [1, 2, 3, 4, 5];\nReactDOM.render(\n  &lt;NumberList numbers={numbers} /&gt;,\n  document.getElementById(&#39;root&#39;)\n);\n例子：正确的使用 key 的方式\n\nfunction ListItem(props) {\n  // 正确！这里不需要指定 key：\n  return &lt;li&gt;{props.value}&lt;/li&gt;;\n}\n\nfunction NumberList(props) {\n  const numbers = props.numbers;\n  const listItems = numbers.map((number) =&gt;\n    // 正确！key 应该在数组的上下文中被指定\n    &lt;ListItem key={number.toString()}              value={number} /&gt;\n\n  );\n  return (\n    &lt;ul&gt;\n      {listItems}\n    &lt;/ul&gt;\n  );\n}\n\nconst numbers = [1, 2, 3, 4, 5];\nReactDOM.render(\n  &lt;NumberList numbers={numbers} /&gt;,\n  document.getElementById(&#39;root&#39;)\n);","children":[],"id":"15db7c03f9c2","title":"比方说，如果你提取出一个&nbsp;ListItem&nbsp;组件，你应该把&nbsp;key&nbsp;保留在数组中的这个&nbsp;&lt;ListItem&nbsp;/&gt;&nbsp;元素上，而不是放在&nbsp;ListItem&nbsp;组件中的&nbsp;&lt;li&gt;&nbsp;元素上","icons":[{"color":"rgb(99, 171, 247)","name":"priority","index":"1","text":"&#xe625"}]},{"parent":"4fddcf0c629c","children":[],"id":"a6c2d9f54c75","title":"一个好的经验法则是：在&nbsp;map()&nbsp;方法中的元素需要设置&nbsp;key&nbsp;属性","icons":[{"color":"rgb(113, 203, 45)","name":"priority","index":"2","text":"&#xe62a"}]}],"style":{"padding":"8px 10px 8px 10px","backgroundColor":"#2196F3","color":"rgb(255, 255, 255)","textAlign":"left","font-weight":"bold","font-size":13,"border-color":"rgb(255, 255, 255)","font-style":"normal","border-radius":"5px","background-color":"#F57F17","lineStype":{"lineColor":"#F57F17","randomLineColor":"rgb(153,204,255)","lineWidth":"2"},"box-shadow":"1px 2px 6px #aaa","lineStyle":{"lineColor":"#F57F17","randomLineColor":"rgb(153,204,255)","lineWidth":"2"},"font-family":"微软雅黑","border-width":"0px","border-style":"none"},"id":"4fddcf0c629c","title":"用&nbsp;key&nbsp;提取组件<br>"},{"parent":"root","lineStyle":{"lineColor":"#E57373","lineWidth":"2"},"children":[{"parent":"af0985f2ef6c","note":"","children":[],"id":"2c1903315d01","title":"数组元素中使用的&nbsp;key&nbsp;在其兄弟节点之间应该是独一无二的。然而，它们不需要是全局唯一的。<br>当我们生成两个不同的数组时，我们可以使用相同的&nbsp;key&nbsp;值","icons":[{"color":"rgb(191, 30, 27)","name":"priority","index":"0","text":"&#xe67a"}]},{"parent":"af0985f2ef6c","note":"const content = posts.map((post) =&gt;\n  &lt;Post\n    key={post.id}\n    id={post.id}\n    title={post.title} /&gt;\n);","children":[],"id":"16615de5a7a0","title":"key&nbsp;会传递信息给&nbsp;React&nbsp;，但不会传递给你的组件。如果你的组件中需要使用&nbsp;key&nbsp;属性的值，请用其他属性名显式传递这个值","icons":[{"color":"rgb(99, 171, 247)","name":"priority","index":"1","text":"&#xe625"}]}],"style":{"padding":"8px 10px 8px 10px","backgroundColor":"#2196F3","color":"#F5F5F5","textAlign":"left","font-weight":"bold","font-size":13,"font-style":"normal","border-radius":"5px","background-color":"#E57373","lineStype":{"lineColor":"#E57373","lineWidth":"2"},"box-shadow":"1px 2px 6px #aaa","lineStyle":{"lineColor":"#E57373","lineWidth":"2"},"font-family":"微软雅黑","border-width":0,"border-style":"solid"},"id":"af0985f2ef6c","title":"key&nbsp;只是在兄弟节点之间必须唯一"},{"parent":"root","lineStyle":{"lineColor":"#2196F3","lineWidth":"2"},"children":[{"parent":"814789d88fd6","note":"","children":[],"id":"541d77717a04","title":"JSX&nbsp;允许在大括号中嵌入任何表达式，所以我们可以内联&nbsp;map()&nbsp;返回的结果","icons":[{"color":"rgb(191, 30, 27)","name":"priority","index":"0","text":"&#xe67a"}]},{"parent":"814789d88fd6","children":[],"id":"e9f1005c7caa","title":"这么做有时可以使你的代码更清晰，但有时这种风格也会被滥用。就像在&nbsp;JavaScript&nbsp;中一样，何时需要为了可读性提取出一个变量，这完全取决于你。<br>但请记住，如果一个&nbsp;map()&nbsp;嵌套了太多层级，那可能就是你提取组件的一个好时机","icons":[{"color":"rgb(99, 171, 247)","name":"priority","index":"1","text":"&#xe625"}]}],"style":{"padding":"8px 10px 8px 10px","backgroundColor":"#2196F3","color":"#F5F5F5","textAlign":"left","font-weight":"bold","font-size":"14px","font-style":"normal","border-radius":"5px","lineStype":{"lineColor":"#2196F3","lineWidth":"2"},"box-shadow":"1px 2px 6px #aaa","lineStyle":{"lineColor":"#2196F3","lineWidth":"2"},"font-family":"微软雅黑","border-width":0,"border-style":"solid"},"id":"814789d88fd6","title":"在&nbsp;JSX&nbsp;中嵌入&nbsp;map()"}],"root":true,"theme":"customise_7fd055efa78b","style":{"background-color":"rgb(255, 83, 92)","border-radius":"6px","color":"rgb(255, 255, 255)","font-weight":"bold","border-color":"rgb(255, 255, 255)","border-width":"0px","border-style":"none"},"id":"root","title":"列表&nbsp;&amp;&nbsp;Key","icons":[{"color":"rgb(255, 255, 255)","name":"","index":"55"}],"structure":"mind_free"}},"meta":{"exportTime":"2022-04-01 17:39:06","member":"60cca488e0b34d55bbf2954f","diagramInfo":{"creator":"60cca488e0b34d55bbf2954f","created":"2022-04-01 17:16:28","modified":"2022-04-01 17:38:50","title":"2.7列表 & Key","category":"mind_free"},"id":"6246c2ece401fd070dd03b58","type":"ProcessOn Schema File","version":"1.0"}}